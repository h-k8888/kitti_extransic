//
// Created by autolab on 24-3-9.
//

#ifndef KITTI_EXTRINSIC_SET_DATA_H
#define KITTI_EXTRINSIC_SET_DATA_H

typedef Eigen::Matrix3d M3D;
typedef Eigen::Vector3d V3D;
using  namespace std;

int seq_size = 11; //kitti odometry sequence

// kitti dataset extrinsic
// "Tr" in file "data_odometry_calib", velodyne in the left camera frame
vector<M3D> r_cam_lidar_input(seq_size);
vector<V3D> t_cam_lidar_input(seq_size);

//  R, T in raw_data file "calib_imu_to_velo.txt", imu in lidar frame
vector<M3D> r_lidar_imu_input(seq_size);
vector<V3D> t_lidar_imu_input(seq_size);

//  R, T in raw_data file "calib_velo_to_cam.txt"
vector<M3D> r_cam_lidar_raw_input(seq_size);
vector<V3D> t_cam_lidar_raw_input(seq_size);

vector<M3D> r_imu_lidar_output(seq_size);
vector<V3D> t_imu_lidar_output(seq_size);

vector<M3D> r_imu_cam_output(seq_size);
vector<V3D> t_imu_cam_output(seq_size);


void set_cam_lidar_odom()
{
    Eigen::Matrix<double, 3, 4> Tr;
    //00
    Tr << 4.276802385584e-04, -9.999672484946e-01, -8.084491683471e-03, -1.198459927713e-02,
            -7.210626507497e-03, 8.081198471645e-03, -9.999413164504e-01, -5.403984729748e-02,
            9.999738645903e-01, 4.859485810390e-04, -7.206933692422e-03, -2.921968648686e-01;
    r_cam_lidar_input[0] = Tr.block<3,3>(0,0);
    t_cam_lidar_input[0] = Tr.block<3,1>(0,3);

    //01
    Tr << 4.276802385584e-04, -9.999672484946e-01, -8.084491683471e-03, -1.198459927713e-02,
            -7.210626507497e-03, 8.081198471645e-03, -9.999413164504e-01, -5.403984729748e-02,
            9.999738645903e-01, 4.859485810390e-04, -7.206933692422e-03, -2.921968648686e-01;
    r_cam_lidar_input[1] = Tr.block<3,3>(0,0);
    t_cam_lidar_input[1] = Tr.block<3,1>(0,3);

    //02
    Tr << 4.276802385584e-04, -9.999672484946e-01, -8.084491683471e-03, -1.198459927713e-02,
            -7.210626507497e-03, 8.081198471645e-03, -9.999413164504e-01, -5.403984729748e-02,
            9.999738645903e-01, 4.859485810390e-04, -7.206933692422e-03, -2.921968648686e-01;
    r_cam_lidar_input[2] = Tr.block<3,3>(0,0);
    t_cam_lidar_input[2] = Tr.block<3,1>(0,3);

    //03
    Tr << 2.347736981471e-04, -9.999441545438e-01, -1.056347781105e-02, -2.796816941295e-03,
            1.044940741659e-02, 1.056535364138e-02, -9.998895741176e-01, -7.510879138296e-02,
            9.999453885620e-01, 1.243653783865e-04, 1.045130299567e-02, -2.721327964059e-01;
    r_cam_lidar_input[3] = Tr.block<3,3>(0,0);
    t_cam_lidar_input[3] = Tr.block<3,1>(0,3);

    //04
    Tr << -1.857739385241e-03, -9.999659513510e-01, -8.039975204516e-03, -4.784029760483e-03,
            -6.481465826011e-03, 8.051860151134e-03, -9.999466081774e-01, -7.337429464231e-02,
            9.999773098287e-01, -1.805528627661e-03, -6.496203536139e-03, -3.339968064433e-01;
    r_cam_lidar_input[4] = Tr.block<3,3>(0,0);
    t_cam_lidar_input[4] = Tr.block<3,1>(0,3);

    //05
    Tr << -1.857739385241e-03, -9.999659513510e-01, -8.039975204516e-03, -4.784029760483e-03,
            -6.481465826011e-03, 8.051860151134e-03, -9.999466081774e-01, -7.337429464231e-02,
            9.999773098287e-01, -1.805528627661e-03, -6.496203536139e-03, -3.339968064433e-01;
    r_cam_lidar_input[5] = Tr.block<3,3>(0,0);
    t_cam_lidar_input[5] = Tr.block<3,1>(0,3);

    //06
    Tr << -1.857739385241e-03, -9.999659513510e-01, -8.039975204516e-03, -4.784029760483e-03,
            -6.481465826011e-03, 8.051860151134e-03, -9.999466081774e-01, -7.337429464231e-02,
            9.999773098287e-01, -1.805528627661e-03, -6.496203536139e-03, -3.339968064433e-01;
    r_cam_lidar_input[6] = Tr.block<3,3>(0,0);
    t_cam_lidar_input[6] = Tr.block<3,1>(0,3);

    //07
    Tr << -1.857739385241e-03, -9.999659513510e-01, -8.039975204516e-03, -4.784029760483e-03,
            -6.481465826011e-03, 8.051860151134e-03, -9.999466081774e-01, -7.337429464231e-02,
            9.999773098287e-01, -1.805528627661e-03, -6.496203536139e-03, -3.339968064433e-01;
    r_cam_lidar_input[7] = Tr.block<3,3>(0,0);
    t_cam_lidar_input[7] = Tr.block<3,1>(0,3);

    //08
    Tr << -1.857739385241e-03, -9.999659513510e-01, -8.039975204516e-03, -4.784029760483e-03,
            -6.481465826011e-03, 8.051860151134e-03, -9.999466081774e-01, -7.337429464231e-02,
            9.999773098287e-01, -1.805528627661e-03, -6.496203536139e-03, -3.339968064433e-01;
    r_cam_lidar_input[8] = Tr.block<3,3>(0,0);
    t_cam_lidar_input[8] = Tr.block<3,1>(0,3);

    //09
    Tr << -1.857739385241e-03, -9.999659513510e-01, -8.039975204516e-03, -4.784029760483e-03,
            -6.481465826011e-03, 8.051860151134e-03, -9.999466081774e-01, -7.337429464231e-02,
            9.999773098287e-01, -1.805528627661e-03, -6.496203536139e-03, -3.339968064433e-01;
    r_cam_lidar_input[9] = Tr.block<3,3>(0,0);
    t_cam_lidar_input[9] = Tr.block<3,1>(0,3);

    //10
    Tr << -1.857739385241e-03, -9.999659513510e-01, -8.039975204516e-03, -4.784029760483e-03,
            -6.481465826011e-03, 8.051860151134e-03, -9.999466081774e-01, -7.337429464231e-02,
            9.999773098287e-01, -1.805528627661e-03, -6.496203536139e-03, -3.339968064433e-01;
    r_cam_lidar_input[10] = Tr.block<3,3>(0,0);
    t_cam_lidar_input[10] = Tr.block<3,1>(0,3);
}

void set_lidar_imu_raw()
{
    // 00
    r_lidar_imu_input[0] << 9.999976e-01, 7.553071e-04, -2.035826e-03,
                            -7.854027e-04, 9.998898e-01, -1.482298e-02,
                            2.024406e-03, 1.482454e-02, 9.998881e-01;
    t_lidar_imu_input[0] << -8.086759e-01, 3.195559e-01, -7.997231e-01;
    // 01
    r_lidar_imu_input[1] = r_lidar_imu_input[0];
    t_lidar_imu_input[1] = t_lidar_imu_input[0];
    // 02
    r_lidar_imu_input[2] = r_lidar_imu_input[0];
    t_lidar_imu_input[2] = t_lidar_imu_input[0];

    // 03
    r_lidar_imu_input[3] << 9.999976e-01, 7.553071e-04, -2.035826e-03,
                            -7.854027e-04, 9.998898e-01, -1.482298e-02,
                            2.024406e-03, 1.482454e-02, 9.998881e-01;
    t_lidar_imu_input[3] << -8.086759e-01, 3.195559e-01, -7.997231e-01;

    // 04
    r_lidar_imu_input[4] << 9.999976e-01, 7.553071e-04, -2.035826e-03,
                            -7.854027e-04, 9.998898e-01, -1.482298e-02,
                            2.024406e-03, 1.482454e-02, 9.998881e-01;
    t_lidar_imu_input[4] << -8.086759e-01, 3.195559e-01, -7.997231e-01;

    for (int i = 5; i < seq_size; ++i) {
        r_lidar_imu_input[i] =  r_lidar_imu_input[4];
        t_lidar_imu_input[i] =  t_lidar_imu_input[4];
    }

}

void set_cam_lidar_raw()
{
    r_cam_lidar_raw_input[0] << 7.967514e-03, -9.999679e-01, -8.462264e-04,
                                -2.771053e-03, 8.241710e-04, -9.999958e-01,
                                9.999644e-01, 7.969825e-03, -2.764397e-03;
    t_cam_lidar_raw_input[0] << -1.377769e-02, -5.542117e-02, -2.918589e-01;
}

#endif //KITTI_EXTRINSIC_SET_DATA_H
